<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <div th:replace="public/public_header.html :: basic_head"></div>

    <style>
        .w-1{
            width:7.25rem !important;
        }
    </style>

    <script>
        const container = angular.module("container-main", []);

        container.controller("container-controller", async ($scope, $timeout) => {

            const setType = $("#set-type").val();

            /*
            *
            *
            *
            * 기능
            * 사용자 찾기, 사용자 추가, 생성하기
            * 사용자 삭제, 사용자 정보 설정 업데이트
            *
            * */

            $scope.member = {};

            $scope.member.find = async () =>{

            }

            $scope.member.add = async () =>{

            }

            $scope.member.delete = async () =>{

            }

            $scope.member.update = async () =>{

            }

            $scope.wiki = {}
            $scope.wiki.create = async ()=>{

            }

            console.log("Hello worlds : ", setType);
        });
    </script>
</head>
<body>
    <div class="page-info d-none">
        <!-- server set_type -->
        <input type="text" id="set-type" value="default">
    </div>
    <!--class="container-main" -->
    <div class="page-wrapper container-main" ng-app="container-main" ng-controller="container-controller">
        <div class="page-body">
            <div class="container-xl">
                <div class="card mb-3">
                    <div class="card-header">
                        WIKI 기본 설정
                    </div>
                    <div class="card-body">
                        <div class="row p-4">
                            <div class="mb-4 col-sm-6">
                                <label class="form-label">Title</label>
                                <input type="text" class="form-control rounded-3" name="example-text-input" placeholder="제목 입력">
                            </div>
                            <div class="mb-4 col-sm-3">
                                <label class="form-label">Category</label>
                                <select class="form-select">
                                    <option value="1">One</option>
                                    <option value="2">Two</option>
                                    <option value="3">Three</option>
                                </select>
                            </div>
                            <div class="mb-4 col-sm-3">
                                <label class="form-label">Access</label>
                                <select class="form-select">
                                    <option value="1">Public</option>
                                    <option value="2">Internal</option>
                                    <option value="3">Private</option>
                                </select>
                            </div>
                            <div class="mb-4 col-sm-9">
                                <div class="form-label">Logo</div>
                                <input type="file" class="form-control">
                            </div>
                            <div class="mb-3 col-sm-12">
                                <label class="form-label">Description
                                    <span class="form-label-description">56/100</span>
                                </label>
                                <textarea class="form-control" name="example-textarea-input" rows="6" placeholder="설명 입력 (최대 100자)" style="height: 122px;"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        권한 설정
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4 p-3">
                                <label class="form-label">사용자 선택</label>
                                <div>
                                    <a href="#" class="btn btn-light w-100" data-bs-toggle="modal" data-bs-target="#member-add-modal">
                                        <!-- Download SVG icon from http://tabler-icons.io/i/brand-github -->
                                        <i class="fa-solid fa-person"></i>
                                        &nbsp;사용자 찾기
                                    </a>
                                </div>
<!--                                <select ui-select2="config.select2" ng-model="data.newuser.id" class="form-select ng-pristine ng-untouched ng-valid ng-empty select2-hidden-accessible" data-select2-id="1" tabindex="-1" aria-hidden="true">-->
<!--                                    <option value="" data-select2-id="3" selected="selected"></option>-->

<!--                                </select>-->
                            </div>
                            <div class="col-md-2 p-3">
                                <label class="form-label">권한</label>
                                <select ng-model="data.newuser.role" class="form-select ng-pristine ng-untouched ng-valid ng-not-empty">
                                    <option value="owner">Owner</option>
                                    <option value="admin">Admin</option>
                                    <option value="editor">Editor</option>
                                    <option value="guest" selected="selected">Guest</option>
                                </select>
                            </div>
                            <div class="col-md-4 p-3">
                                <label class="form-label">만료일</label>
                                <div class="input-group">
                                    <input type="date" ng-model="data.newuser.expired" class="form-control ng-pristine ng-untouched ng-valid ng-empty">
                                    <!-- ngIf: data.newuser.expired -->
                                </div>
                            </div>
                            <div class="col-md-2 p-3">
                                <label class="form-label">&nbsp;</label>
                                <button ng-click="member.update(data.newuser)" class="btn btn-primary btn-block">추가</button>
                            </div>
                        </div>
                        <div class="table-responsive mb-0">
                            <table class="table card-table table-vcenter table-hover">
                                <thead>
                                <tr>
                                    <th>구성원</th>
                                    <th class="w-1">참가일</th>
                                    <th class="w-1">만료일</th>
                                    <th class="w-1">권한</th>
                                    <th class="w-1">만료설정</th>
                                    <th class="w-1">설정</th>
                                </tr>
                                </thead>
                                <tbody>
<!--                                ng-repeat="item in member.data" class="ng-scope"-->
                                <!-- ngRepeat: item in member.data --><tr>
                                    <td class="text-left ng-binding">정종현<!-- ngIf: item.id == me --><span ng-if="item.id == me" class="badge bg-green-lt ml-1 ng-scope">It's you</span><!-- end ngIf: item.id == me --><br><span class="text-muted ng-binding">jelly@season.co.kr</span>
                                    </td>
                                    <td class="w-1 ng-binding">2022-03-08</td>
                                    <td class="w-1 ng-binding">만료일 없음</td>
                                    <td class="w-1">
                                        <!-- ngIf: item.id != me && !(project_role != 'owner' && item.role =='owner') --><!-- ngIf: item.id == me --><span ng-if="item.id == me" class="badge bg-dark ng-binding ng-scope">owner</span><!-- end ngIf: item.id == me --><!-- ngIf: item.id != me && (project_role != 'owner' && item.role =='owner') -->
                                    </td>
                                    <td class="w-1">
                                        <div style="width: 210px;" class="input-group">
                                            <!-- ngIf: item.id != me -->
                                            <!-- ngIf: item.expired -->
                                        </div>
                                    </td>
                                    <td class="w-1"><!-- ngIf: item.id != me -->
                                    </td>
                                </tr>
                                <tr>
                                    <td class="text-left ng-binding">정종권<!-- ngIf: item.id == me --><br><span class="text-muted ng-binding">rnjsgus6079@blubear.kr</span>
                                    </td>
                                    <td class="w-1 ng-binding">2022-03-08</td>
                                    <td class="w-1 ng-binding">만료일 없음</td>
                                    <td class="w-1">
                                        <!-- ngIf: item.id != me && !(project_role != 'owner' && item.role =='owner') --><select style="width: 120px;" ng-model="item.role" ng-if="item.id != me &amp;&amp; !(project_role != 'owner' &amp;&amp; item.role =='owner')" ng-change="member.update(item)" class="form-select text-center ng-pristine ng-valid ng-scope ng-not-empty ng-touched">
                                        <option value="owner">Owner</option>
                                        <option value="admin" selected="selected">Admin</option>
                                        <option value="editor">Editor</option>
                                        <option value="guest">Guest</option>
                                    </select><!-- end ngIf: item.id != me && !(project_role != 'owner' && item.role =='owner') --><!-- ngIf: item.id == me --><!-- ngIf: item.id != me && (project_role != 'owner' && item.role =='owner') -->
                                    </td>
                                    <td class="w-1">
                                        <div style="width: 210px;" class="input-group">
                                            <!-- ngIf: item.id != me --><input type="date" ng-model="item.expired" ng-if="item.id != me" ng-change="member.update(item)" class="form-control ng-pristine ng-untouched ng-valid ng-scope ng-empty"><!-- end ngIf: item.id != me -->
                                            <!-- ngIf: item.expired -->
                                        </div>
                                    </td>
                                    <td class="w-1 row"><!-- ngIf: item.id != me -->
                                        <a ng-click="member.delete(item)" class="btn btn-dark ng-scope col-4 mx-2">
                                            저장
                                        </a>
                                        <a ng-click="member.delete(item)" class="btn btn-danger ng-scope col-4">
                                            <i class="fas fa-trash"></i>
                                        </a>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="container">
            <div class="d-flex pr-4 pl-4 pb-4">
                <div class="ml-auto" style="margin-left: auto !important;">
                </div>
                <a href="/" style="border-radius: 8px;" class="btn btn-white mx-2">취소</a>
                <button ng-click="info.update()" style="border-radius: 8px;" class="btn btn-primary ml-2">생성하기</button>
            </div>
        </div>


        <div class="modal fade" id="member-add-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div role="document" style="max-width: 860px; width: 90vw;" class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header pr-3 pl-3">
                        <div class="modal-title">결재선 지정</div>
                        <button type="button" class="btn link-secondary ml-auto" data-bs-dismiss="modal">닫기</button>
                        <button type="button" ng-click="event.submit()" class="btn btn-primary ml-1">저장</button>
                    </div>
                    <div class="modal-body">
                        <div class="row row-deck row-cards">
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-body">
                                        <ul>
                                            <li><a ng-click="select_group('season')" class="btn-link cursor-pointer "><span>SEASON</span><i class="fa-solid fa-circle-check ml-1"></i></a>
                                            </li>
                                            <ul>
                                                <li><a ng-click="select_group('season-actr')" class="btn-link cursor-pointer "><span>AI융합기술연구팀</span><i class="fa-solid fa-circle-check ml-1"></i></a>
                                                </li>
                                            </ul>
                                            <ul>
                                                <li><a ng-click="select_group('season-mgmt')" class="btn-link cursor-pointer "><span>경영지원팀</span><i class="fa-solid fa-circle-check ml-1"></i></a>
                                                </li>
                                            </ul>
                                            <ul>
                                                <li><a ng-click="select_group('season-design')" class="btn-link cursor-pointer "><span>디자인팀</span><i class="fa-solid fa-circle-check ml-1"></i></a>
                                                </li>
                                            </ul>
                                            <ul>
                                                <li><a ng-click="select_group('season-svcdev')" class="btn-link cursor-pointer "><span>서비스개발팀</span><i class="fa-solid fa-circle-check ml-1"></i></a>
                                                </li>
                                            </ul>
                                            <ul>
                                                <li><a ng-click="select_group('season-sysdev')" class="btn-link cursor-pointer  active"><span>시스템개발팀</span><i class="fa-solid fa-circle-check ml-1"></i></a>
                                                </li>
                                            </ul>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card">
                                    <div style="max-height: 500px; overflow-y: auto;" class="card-table table-responsive">
                                        <table class="table table-vcenter table-hover">
                                            <thead>
                                            <tr>
                                                <th class="text-left">이름</th>
                                                <th class="w-1">직책</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <!-- ngRepeat: user in users --><tr ng-repeat="user in users" ng-click="select_user(user)" class="cursor-pointer ">
                                                <td class="text-left ng-binding">권태욱<!-- ngIf: user.user_id==user_id -->
                                                </td>
                                                <td class="w-1 ng-binding">팀장</td>
                                            </tr><!-- end ngRepeat: user in users --><tr ng-repeat="user in users" ng-click="select_user(user)" class="cursor-pointer ">
                                                <td class="text-left ng-binding">정종현<!-- ngIf: user.user_id==user_id --><span ng-if="user.user_id==user_id" class="badge badge-sm bg-dark ml-2 ng-scope">me</span><!-- end ngIf: user.user_id==user_id -->
                                                </td>
                                                <td class="w-1 ng-binding">인턴</td>
                                            </tr><!-- end ngRepeat: user in users -->
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="card-footer p-2 text-right">
                                        <div ng-click="add_shared()" class="btn btn-white btn-sm mr-1">공람자</div>
                                        <div ng-click="add_process()" class="btn btn-primary btn-sm">결재자</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card">
                                    <div style="height: 220px; overflow-y: auto;" class="card-body p-0 card-table table-responsive">
                                        <table class="table table-vcenter table-hover">
                                            <thead>
                                            <tr>
                                                <th colspan="4" class="text-left">결재자</th>
                                            </tr>
                                            </thead>
                                            <!-- ngRepeat: process_group in process_prepend -->
                                            <!-- ngRepeat: process_group in process -->
                                            <!-- ngRepeat: process_group in process_append --><tbody ng-repeat="process_group in process_append" class="ng-scope">
                                        <!-- ngRepeat: (j, user) in process_group --><tr ng-repeat="(j, user) in process_group" class="cursor-pointer bg-blue-lt ng-scope">
                                            <td class="w-1 text-center pr-1 pl-2"><!-- ngIf: j==0 && process_group.length > 1 --><!-- ngIf: j > 0 && process_group.length > 1 --><!-- ngIf: process_group.length == 1 --><i ng-if="process_group.length == 1" class="fa-solid fa-user ng-scope"></i><!-- end ngIf: process_group.length == 1 -->
                                            </td>
                                            <td class="w-1 text-left pr-1 pl-1 ng-binding">권태욱</td>
                                            <td class="pr-1 pl-1 text-right"><small class="text-muted ng-binding">시스템개발팀</small><small class="text-muted ml-1 ng-binding">(팀장)</small>
                                            </td>
                                            <td class="w-1 pr-2 pl-1"></td>
                                        </tr><!-- end ngRepeat: (j, user) in process_group -->
                                        </tbody><!-- end ngRepeat: process_group in process_append --><tbody ng-repeat="process_group in process_append" class="ng-scope">
                                        <!-- ngRepeat: (j, user) in process_group --><tr ng-repeat="(j, user) in process_group" class="cursor-pointer bg-blue-lt ng-scope">
                                            <td class="w-1 text-center pr-1 pl-2"><!-- ngIf: j==0 && process_group.length > 1 --><!-- ngIf: j > 0 && process_group.length > 1 --><!-- ngIf: process_group.length == 1 --><i ng-if="process_group.length == 1" class="fa-solid fa-user ng-scope"></i><!-- end ngIf: process_group.length == 1 -->
                                            </td>
                                            <td class="w-1 text-left pr-1 pl-1 ng-binding">채정훈</td>
                                            <td class="pr-1 pl-1 text-right"><small class="text-muted ng-binding">경영지원팀</small><small class="text-muted ml-1 ng-binding">(이사)</small>
                                            </td>
                                            <td class="w-1 pr-2 pl-1"></td>
                                        </tr><!-- end ngRepeat: (j, user) in process_group -->
                                        </tbody><!-- end ngRepeat: process_group in process_append -->
                                        </table>
                                    </div>
                                    <div style="height: 220px; overflow-y: auto;" class="card-body p-0 card-table table-responsive">
                                        <table class="table table-vcenter table-hover">
                                            <thead>
                                            <tr>
                                                <th colspan="3" class="text-left">공람자</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <!-- ngRepeat: user in shared -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

</body>
</html>